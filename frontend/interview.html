<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/index.css">
  <script src="https://webgazer.cs.brown.edu/webgazer.js?" defer></script>
  <script src="./js/script.js" defer></script>
  <script src="https://cdn.socket.io/4.1.1/socket.io.min.js"
    integrity="sha384-cdrFIqe3RasCMNE0jeFG9xJHog/tgOVC1E9Lzve8LQN1g5WUHo0Kvk1mawWjxX7a"
    crossorigin="anonymous"></script>



  <title>Interview</title>
  <style>

  </style>
</head>

<body onload=getuser()>
  <nav class="navbar navbar-light bg-light">
    <a class="navbar-brand" href="index.html">

      <!-- <img src="../frontend/assets/logo.png" width="" height="50" alt="50"> -->
    </a>
    <div class="navbar-right user" style="padding: 5px; margin: 10px;">
      <div class="useritem" id="useritem">
      </div>
      <img src="../frontend/assets/pic.png" />
    </div>
  </nav>
  <audio id="myAudio">
    <source src="./alert.mp3" type="audio/mp3">
    <!-- <source src="./mj.mp3" type="audio/mp3"> -->
  </audio>
  <div class="inter-panel">

    <textarea id="output" rows="10" cols="50" readonly></textarea><br>
    <button id="start">Start Recording</button>
    <button id="stop" disabled>Stop Recording</button>
    <br>
    <button id="submit" style="background-color: lightgreen;">Submit Answer</button>
  </div>
    
		<script>
      const submitBtn = document.getElementById('submit');
      const startBtn = document.getElementById('start');
        const stopBtn = document.getElementById('stop');
        const outputTextarea = document.getElementById('output');

        if('SpeechRecognition' in window || 'webkitSpeechRecognition' in window){
            recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = 'en-US';
            
            recognition.onstart = ()=>{
                console.log('Speech Recognition started')
                startBtn.disabled = true;
                stopBtn.disabled = false;
                
            };

            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                outputTextarea.value += transcript;
                outputTextarea.value += ". ";
            };

            recognition.onerror = (event) => {
                console.error("Speech recognition error : ",event.error );
            };

            startBtn.addEventListener('click', () => {
                recognition.start();
                startBtn.style.backgroundColor = '#f44336';
            });

            stopBtn.addEventListener('click', () => {
                console.log('Speech recognition ended');
                recognition.stop();
                startBtn.disabled = false;
                stopBtn.disabled = true;
                startBtn.style.backgroundColor = 'rgba(34, 123, 224, 0.5)';
            });

            // Send answer to Interviewer
            submitBtn.addEventListener('click', () => {
                console.log('Answer submitted!');
                
                var ans = outputTextarea.value;

                // pass ans to ai
            });

            
        }
        else{
            console.error("Speech recognition not supported in this browser");
            startBtn.disabled = true;5
            stopBtn.disabled = true;
        }
        
		</script>
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
  integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
  integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="js/login.js"></script>
<script src="js/interview.js"></script>
</html>